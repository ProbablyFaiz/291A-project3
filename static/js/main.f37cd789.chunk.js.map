{"version":3,"sources":["components/Compose.js","components/LoginForm.js","components/MessageList.js","components/UserList.js","App.js","reportWebVitals.js","index.js"],"names":["Compose","props","state","url","message","token","typeable","formText","error","handleChange","bind","save","event","this","setState","target","value","preventDefault","formData","FormData","append","fetch","method","headers","Headers","mode","body","then","response","ok","json","status","data","catch","requestFailed","prevProps","errorMessage","style","color","id","className","onSubmit","type","onChange","disabled","Component","LoginForm","username","password","URLSearchParams","toString","saveToken","saveURL","loggedIn","startStream","MessageList","displayMessages","messages","messageList","map","m","index","UserList","displayUsers","users","userList","u","App","sessionStorage","displayLogin","reconnecting","accessToken","addUser","deleteUser","formatDate","userToAdd","filter","user","length","prevState","concat","userToDelete","timestamp","t","Date","Intl","DateTimeFormat","year","month","day","hour","minute","second","format","eventSource","EventSource","addEventListener","close","JSON","parse","readyState","class","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f37cd789.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport '../css/Compose.css';\n\nclass Compose extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      url : props.url,\n      message: \"\",\n      token: props.token,\n      typeable: props.typeable,\n      formText: \"\",\n      error: \"\"\n    }\n    this.handleChange = this.handleChange.bind(this);\n    this.save = this.save.bind(this);\n  }\n\n  handleChange (event) {\n    this.setState({message: event.target.value});\n  }\n\n  save (event) {\n    this.setState({error: \"\"});\n    event.preventDefault();\n\n    var formData = new FormData();\n    formData.append('message', this.state.message);\n\n    this.setState({token: this.props.token});\n\n    fetch(this.state.url + '/message', {\n     method: 'POST',\n     headers: new Headers({'Authorization': 'Bearer ' + this.state.token}),\n     mode: 'cors',\n     body: formData\n    }).then((response) => {\n      if(!response.ok) {\n        this.setState({error: response.status});\n      }\n      else return response.json();\n    })\n    .then((data) => {\n    })\n    .catch((error) => {\n      this.setState({ requestFailed: true });\n    });\n\n    this.setState({message: \"\"});\n  }\n\n  componentDidUpdate(prevProps){\n    if (this.props.typeable !== prevProps.typeable) {\n      this.setState({typeable: this.props.typeable});\n    }\n  }\n\n  render() {\n    let errorMessage;\n    if (this.state.error !== \"\")\n    {\n      errorMessage = <p style={{ color: 'red' }}>{this.state.error} Error</p>;\n    }\n\n    if (this.state.typeable) {\n      return (\n        <div id=\"compose\">\n          {errorMessage}\n          <form className=\"message\" onSubmit={this.save}>\n            <input id=\"messageText\" type=\"text\" value={this.state.message} onChange={this.handleChange}/>\n          </form>\n        </div>\n      );\n    }\n    return (\n      <div id=\"compose\">\n        {errorMessage}\n        <form className=\"message\">\n          <input id=\"messageText\" type=\"text\" value=\"Please reconnect to type a message.\" disabled =\"disabled\"/>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Compose;","import React, { Component } from \"react\";\n\nclass LoginForm extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      url : \"\",\n      username : \"\",\n      password : \"\",\n      error: \"\"\n    }\n    this.handleChange = this.handleChange.bind(this);\n    this.save = this.save.bind(this);\n  }\n\n\n  handleChange(event) {\n    if (event.target.id === \"username\") {\n      this.setState({username: event.target.value});\n    }\n    else if (event.target.id === \"password\") {\n      this.setState({password: event.target.value});\n    }\n    else if (event.target.id === \"url\") {\n      this.setState({url: event.target.value});\n    }\n  }\n\n  save(event) {\n    this.setState({error: \"\"});\n    var formData = new URLSearchParams();\n    formData.append('username', this.state.username);\n    formData.append('password', this.state.password);\n\n    event.preventDefault();\n\n\n    fetch(this.state.url + '/login', {\n     method: 'POST',\n     headers: {'Content-Type':'application/x-www-form-urlencoded'},\n     mode: 'cors',\n     body: formData.toString()\n    }).then((response) => {\n      if(!response.ok) {\n        this.setState({error: response.status});\n      }\n      else return response.json();\n    })\n    .then((data) => {\n      this.props.saveToken(data[\"token\"]);\n      this.props.saveURL(this.state.url);\n      this.props.loggedIn();\n      this.props.startStream();\n    })\n    .catch((error) => {\n      this.setState({ requestFailed: true });\n    });\n  }\n\n  render() {\n    let errorMessage;\n    if (this.state.error !== \"\")\n    {\n      errorMessage = <p style={{ color: 'red' }}>{this.state.error} Error</p>;\n    }\n    return (\n      <div id=\"login\">\n        <div>\n          {errorMessage}\n          <h2>Login</h2>\n          <form method=\"post\" onSubmit={this.save}>\n              <label>URL <br /><input id=\"url\" type=\"text\" onChange={this.handleChange}/></label>\n              <br />\n              <label>Username <br /><input id=\"username\" type=\"text\" onChange={this.handleChange}/></label>\n              <br />\n              <label>Password <br /><input id=\"password\" type=\"password\" onChange={this.handleChange}/></label>\n              <br />\n              <button type=\"submit\">Submit</button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LoginForm;","import React, { Component } from \"react\";\nimport '../css/MessageList.css';\n\nclass MessageList extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      displayMessages : props.displayMessages,\n      messages: props.messages\n    }\n  }\n\n  componentDidUpdate(prevProps){\n    if (this.props.displayMessages !== prevProps.displayMessages) {\n      this.setState({displayMessages : this.props.displayMessages});\n    }\n    if (this.props.messages !== prevProps.messages) {\n      this.setState({messages : this.props.messages});\n    }\n  }\n\n  render() {\n    let messageList;\n    if (this.state.displayMessages) {\n      messageList = this.state.messages.map((m, index) => <ul key={index}>{m}</ul>);\n    }\n    return (\n      <div className=\"messageList\">\n        <p>Messages</p>\n        {messageList}\n      </div>\n    );\n  }\n}\n\nexport default MessageList;","import React, { Component } from \"react\";\nimport '../css/UserList.css';\nclass UserList extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      displayUsers : props.displayUsers,\n      users : props.users\n    }\n  }\n\n  componentDidUpdate(prevProps){\n    if (this.props.displayUsers !== prevProps.displayUsers) {\n      this.setState({displayUsers : this.props.displayUsers});\n    }\n    if (this.props.users !== prevProps.users) {\n      this.setState({users : this.props.users});\n    }\n  }\n\n  render() {\n    let userList;\n    if (this.state.displayUsers) {\n      userList = this.state.users.map((u, index) => <ul key={index}>{u}</ul>);\n    }\n    return (\n      <div className=\"userList\">\n        <p>Online</p>\n        {userList}\n      </div>\n    );\n  }\n}\n\nexport default UserList;","import React, { Component } from \"react\";\nimport './css/App.css';\nimport Compose from \"./components/Compose.js\";\nimport LoginForm from \"./components/LoginForm.js\";\nimport MessageList from \"./components/MessageList.js\";\nimport UserList from \"./components/UserList.js\";\n\nclass App extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      url : sessionStorage.url || \"https://chat.cs291.com\",\n      messages : [],\n      users : [],\n      displayUsers : false,\n      displayMessages : false,\n      displayLogin : true,\n      reconnecting : false,\n      token : sessionStorage.accessToken || \"\"\n    }\n    this.addUser = this.addUser.bind(this);\n    this.deleteUser = this.deleteUser.bind(this);\n    this.formatDate = this.formatDate.bind(this);\n    this.loggedIn = this.loggedIn.bind(this);\n    this.saveToken = this.saveToken.bind(this);\n    this.saveURL = this.saveURL.bind(this);\n    this.startStream = this.startStream.bind(this);\n  }\n\n  addUser(userToAdd){\n    if (!(this.state.users.filter(user => user === userToAdd).length > 0)) {\n      this.setState(prevState => ({users: prevState.users.concat(userToAdd)}));\n    }\n  }\n\n  deleteUser(userToDelete){\n      this.setState(prevState => ({\n          users: prevState.users.filter(user => user !== userToDelete )\n      }));\n  }\n\n  formatDate(timestamp){\n    let t = new Date(timestamp*1000);\n    let formatted = new Intl.DateTimeFormat('en-US', {year: 'numeric', month: '2-digit',day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit'}).format(t);\n    return formatted;\n  }\n\n  loggedIn(){\n    this.setState({displayLogin : false});\n    this.setState({displayUsers : true});\n    this.setState({displayMessages : true});\n  }\n\n  saveToken(token){\n    sessionStorage.accessToken = token;\n    this.setState({token: token});\n  }\n\n  saveURL(url){\n    this.setState({url: url});\n  }\n\n  startStream() {\n    this.eventSource = new EventSource(this.state.url + \"/stream/\" + sessionStorage.accessToken);\n\n    this.eventSource.addEventListener(\n        \"Disconnect\",\n        (event) => {\n            this.eventSource.close();\n            delete sessionStorage.accessToken;\n            this.setState({displayLogin : true});\n            this.setState({displayUsers : false});\n            this.setState({displayMessages : false});\n        },\n        false\n    );\n\n    this.eventSource.addEventListener(\n        \"Join\",\n        (event) => {\n            this.setState({reconnecting : false});\n            this.setState({displayUsers : true});\n            var data = JSON.parse(event.data);\n            this.addUser(data.user);\n            this.setState(prevState => ({messages: prevState.messages.concat(this.formatDate(data[\"created\"]) + \" JOIN: \" + data.user)}));\n        },\n        false\n    );\n\n    this.eventSource.addEventListener(\n        \"Message\",\n        (event) => {\n            this.setState({reconnecting : false});\n            this.setState({displayUsers : true});\n            var data = JSON.parse(event.data);\n            this.setState(prevState => ({messages: prevState.messages.concat(this.formatDate(data[\"created\"]) + \" (\" + data.user + \") \" + data.message)}));\n        },\n        false\n    );\n\n    this.eventSource.addEventListener(\n        \"Part\",\n        (event) => {\n            this.setState({reconnecting : false});\n            this.setState({displayUsers : true});\n            var data = JSON.parse(event.data);\n            this.deleteUser(data.user);\n            this.setState(prevState => ({messages: prevState.messages.concat(this.formatDate(data[\"created\"]) + \" PART: \" + data.user)}));\n        },\n        false\n    );\n\n    this.eventSource.addEventListener(\n        \"ServerStatus\",\n        (event) => {\n            this.setState({reconnecting : false});\n            this.setState({displayUsers : true});\n            var data = JSON.parse(event.data);\n            this.setState(prevState => ({messages: prevState.messages.concat(this.formatDate(data[\"created\"]) + \" STATUS: \" + data.status)}));\n        },\n        false\n    );\n\n    this.eventSource.addEventListener(\n        \"Users\",\n        (event) => {\n            this.setState({displayLogin : false});\n            this.setState({displayUsers : true});\n            this.setState({displayMessages : true});\n            this.setState({reconnecting : false});\n            this.setState({users:JSON.parse(event.data).users});\n        },\n        false\n    );\n\n    this.eventSource.addEventListener(\n        \"error\",\n        (event) => {\n            this.setState({reconnecting : true});\n            this.setState({displayUsers : false});\n            if (event.target.readyState === 2) {\n                delete sessionStorage.accessToken;\n                this.setState({displayLogin : true});\n            }\n        },\n        false\n    );\n  }\n\n\n  render() {\n    if (this.state.displayLogin)\n    {\n      return (<div className=\"App\">\n                <br />\n                <h3> Disconnected. </h3>\n                <br/>\n                <LoginForm loggedIn = {this.loggedIn} saveToken = {this.saveToken} saveURL = {this.saveURL} startStream = {this.startStream}/>\n              </div>);\n    }\n    else if (this.state.reconnecting)\n    {\n      return (\n      <div className=\"App\">\n        <br />\n        <h3> Disconnected, retrying </h3>\n        <br/>\n        <div className = \"lists\">\n          <div class=\"col-9\">\n            <MessageList displayMessages = {this.state.displayMessages} messages={this.state.messages}/>\n          </div>\n          <div class=\"col-3\">\n            <UserList displayUsers = {this.state.displayUsers} users={this.state.users}/>\n          </div>\n        </div>\n        <hr />\n        <Compose url={this.state.url} token={this.state.token} typeable = {false}/>\n        <br /> <br />\n      </div>\n    );\n    }\n    return (\n      <div className=\"App\">\n        <br />\n        <h3> Connected. </h3>\n        <br/>\n        <div className = \"lists\">\n          <div class=\"col-9\">\n            <MessageList displayMessages = {this.state.displayMessages} messages={this.state.messages}/>\n          </div>\n          <div class=\"col-3\">\n            <UserList displayUsers = {this.state.displayUsers} users={this.state.users}/>\n          </div>\n        </div>\n        <hr />\n        <Compose url={this.state.url} token={this.state.token} typeable={true}/>\n        <br /> <br />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}